---
title: ë§ˆë¦¬ì˜¤ ì›¹ ê²Œì„(5) - ë¸”ë¡ê³¼ ë§µ êµ¬í˜„
author: admin
date: 2022-11-12 15:35:00 +900
lastmod: 2023-01-15 13:56:00 +900
sitemap:
  changefreq: monthly
  priority: 0.5
categories: [Project, Mario]
tags: [WebGame, Mario, ë§ˆë¦¬ì˜¤ ë§µê³¼ ë¸”ë¡ êµ¬í˜„]
image:
  path: https://user-images.githubusercontent.com/63289318/201509280-1be5984d-4020-48e9-a47b-592489aef34f.png
  width: 800
  height: 500
  alt: ë°°ê²½ ì´ë¯¸ì§€
---

> ë³¸ í¬ìŠ¤íŠ¸ëŠ” JS(TS)ë¡œ ë¸”ë¡ê³¼ ë§µ êµ¬í˜„ì— ëŒ€í•œ ê²Œì‹œê¸€ì…ë‹ˆë‹¤.
{: .prompt-info }

## ğŸ˜® êµ¬í˜„ ë°©ë²•
### 1. ë¸”ë¡ ì´ë¯¸ì§€ ìŠ¤í”„ë¼ì´íŠ¸ ì œì‘
**ìŠˆí¼ ë§ˆë¦¬ì˜¤ ë©”ì´ì»¤ 2**ë¼ëŠ” ë‹Œí…ë„ ê²Œì„ì„ ì´ìš©í•´ì„œ í•„ìš”í•œ ë¸”ë¡ì˜ í˜•íƒœë¥¼ í•˜ë‚˜í•˜ë‚˜ ìº¡ì³í•˜ê³  í¬í† ìƒµìœ¼ë¡œ í¸ì§‘í•´ì„œ ë¸”ë¡ ì´ë¯¸ì§€ ìŠ¤í”„ë¼ì´íŠ¸ë¥¼ ì œì‘í–ˆìŠµë‹ˆë‹¤. <br />
( í•˜ë‚˜í•˜ë‚˜ ìë¥´ê³  ë°°ê²½ ì§€ìš°ê³  í•˜ë‹¤ ë³´ë‹ˆ êµ³ì´ í•„ìš”í•˜ì§€ ì•Šì€ í˜•íƒœì˜ ë¸”ë¡ë„ ë§ì´ ë³´ì—¬ì„œ í˜„ì¬ ì‚¬ìš©í•˜ê³  ìˆëŠ” or ì‚¬ìš©í• ë§Œí•œ ë¸”ë¡ë§Œ í¸ì§‘í–ˆìŠµë‹ˆë‹¤. )

![fall](https://user-images.githubusercontent.com/63289318/201509367-af205311-bf63-4421-96b2-1bcc22b6f50d.png){: width="800" height="500" }
_ë¸”ë¡ ì´ë¯¸ì§€ ìŠ¤í”„ë¼ì´íŠ¸ ( ê° ê°€ë¡œ, ì„¸ë¡œ 53px )_

### 2. ë¸”ë¡ í´ë˜ìŠ¤ ìƒì„±
ë¸”ë¡ì€ ë¹„ìŠ·í•œ í˜•íƒœë¡œ ì—¬ëŸ¬ ê°œë¥¼ ì°ì–´ë‚¼ ê²ƒì´ê¸° ë•Œë¬¸ì— í´ë˜ìŠ¤ë¡œ ë§Œë“¤ì–´ì„œ ê°ì²´ë¡œ ì°ì–´ë‚¼ ìˆ˜ ìˆë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.<br />
ë˜í•œ `image`, `context`ì˜ ê²½ìš°ì—ëŠ” ëª¨ë‘ ê³µìœ í•˜ëŠ” ê²ƒì´ë¼ì„œ `static` ë³€ìˆ˜ë¡œ ìƒì„±í–ˆìŠµë‹ˆë‹¤.

```ts
// util : ì´ë¯¸ì§€ ìŠ¤í”„ë¼ì´íŠ¸ì˜ ì–´ë–¤ x, y ì¢Œí‘œì— ì–´ë–¤ ì´ë¯¸ì§€ê°€ ë“¤ì–´ìˆëŠ”ì§€ ê°ì²´ë¡œ ë§Œë“  ë§µí•‘ í…Œì´ë¸”
import { blockKeycode } from "../utils/index";

// type : ê° íƒ€ì…ë“¤ 
import type { BlockShape, BlockType, Position, Size } from "../types/index";

/**
 * ë¸”ë¡ í´ë˜ìŠ¤
 * @param image ë¸”ë¡ì˜ ìŠ¤í”„ë¼ì´íŠ¸ ì´ë¯¸ì§€
 * @param ctx ë°°ê²½í™”ë©´ì„ ê·¸ë¦´ "canvas"ì˜ "context"
 *
 * @param position ë¸”ë¡ì´ ê·¸ë ¤ì§ˆ ìº”ë²„ìŠ¤ì˜ ì¢Œí‘œ
 * @param size ê·¸ë ¤ì§ˆ ë¸”ë¡ì˜ í¬ê¸°
 * @param shape ê·¸ë ¤ì§ˆ ë¸”ë¡ì˜ í˜•íƒœ
 * @param type ê·¸ë ¤ì§ˆ ë¸”ë¡ì˜ ì¢…ë¥˜
 */
export default class Block {
  static image: HTMLImageElement;
  static ctx: CanvasRenderingContext2D;

  private position: Position;
  private size: Size;
  private shape: BlockShape;
  private type: BlockType;

  constructor(
    position: Position,
    shape: BlockShape,
    type: BlockType = "default"
  ) {
    // ì²˜ìŒë§Œ ì´ë¯¸ì§€ ë¡œë”©
    if (!Block.image) {
      Block.image = new Image();
      Block.image.src = "./assets/images/block.png";
    }

    this.position = position;
    this.shape = shape;
    this.size = { w: 100, h: 100 };
    this.type = type;
  }

  /**
   * ë¸”ë¡ ë Œë”ë§
   */
  draw() {
    const { x, y } = this.position;
    const { w, h } = this.size;

    Block.ctx.drawImage(
      Block.image,
      blockKeycode.width * blockKeycode[this.shape],
      blockKeycode[this.type],
      blockKeycode.width,
      blockKeycode.height,
      x,
      y,
      w,
      h
    );
  }

  // getter / setter

  // position
  getPosition() {
    return this.position;
  }
  // size
  getSize() {
    return this.size;
  }
}
```

ìœ„ í´ë˜ìŠ¤ë¥¼ ì´ìš©í•´ì„œ ì¢Œí‘œ, íƒ€ì…, í˜•íƒœë§Œ ì •í•´ì£¼ë©´ ì‰½ê²Œ ë¸”ë¡ì„ ìƒì„±í•˜ë„ë¡ êµ¬í˜„í•˜ê³  ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

### 3. ë§µ ê´€ë¦¬ì í´ë˜ìŠ¤ ìƒì„±
ë¸”ë¡ì„ í•˜ë‚˜í•˜ë‚˜ í˜¹ì€ í•œ ì¤„ì”© ë‚˜ëˆ ì„œ ìƒì„±í•˜ëŠ” ì½”ë“œë¥¼ ì•„ë¬´ ë°ë‚˜ ë†”ë‘ëŠ” ê²ƒë³´ë‹¤ëŠ” í•˜ë‚˜ì˜ ê³µê°„ì— ëª¨ì•„ì„œ ë§µì´ë¼ê³  ì •í•˜ê³ , ë§µì„ í•œ ë²ˆì— ê·¸ë¦¬ëŠ” ê²Œ ë” ìœ ìš©í•˜ë‹¤ê³  ìƒê°í•´ì„œ ë§µ ê´€ë¦¬ì í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.<br />
ê¸°ë³¸ì ìœ¼ë¡œ í•˜ë‚˜ì˜ ê´€ë¦¬ìë§Œ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— ì‹±ê¸€í†¤ìœ¼ë¡œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

+ ë§µ ê´€ë¦¬ì í´ë˜ìŠ¤

```ts
// class
import Block from "./Block";

// type
import type { MapType } from "../types/index";

/**
 * ë§µ ìƒì„±ê³¼ ê´€ë ¨ëœ ëª¨ë“  ì²˜ë¦¬ë¥¼ ê´€ë¦¬í•  ê´€ë¦¬ì í´ë˜ìŠ¤ ( ì‹±ê¸€í†¤ )
 */
export default class MapManager {
  static instance: MapManager;

  constructor() {
    // ì‹±ê¸€í†¤ìœ¼ë¡œ êµ¬í˜„
    if (MapManager.instance) return MapManager.instance;

    MapManager.instance = this;
  }

  /**
   * ë§µ ì„±ì„± í•¨ìˆ˜
   * @param type ë§µì˜ ì¢…ë¥˜ ì„ íƒ
   * @param blocks ìƒì„±í•  ë¸”ë¡ì„ ë‹´ì„ ë°°ì—´
   */
  CreateMap(type: MapType, blocks: Block[]) {
    if (type === "stairs") {
      this.createStairs(blocks);
    }
  }

  /**
   * ê³„ë‹¨ë§µ ìƒì„±
   * @param ìƒì„±í•  ë¸”ë¡ì„ ì €ì¥í•  ë¸”ë¡ ë°°ì—´
   */
  private createStairs(blocks: Block[]) {
    // ... ìƒëµ
  }
}
```

+ ë§µ ìƒì„± ì˜ˆì‹œ

```ts
// ë§µ ê´€ë¦¬ì
const mapManager = new MapManager();

// ë¸”ë¡ë“¤
const blocks: Block[] = [];

// ê³„ë‹¨ë§µ ìƒì„±
mapManager.CreateMap("stairs", blocks);
```

ì´ë ‡ê²Œ í•˜ë©´ ë§µì˜ ë³€í™˜ë„ ë” ì‰½ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆìœ¼ë©°, ëŠ˜ì–´ë‚˜ëŠ” ì½”ë“œë„ í•œ ê³³ì— ì •ë¦¬í•  ìˆ˜ ìˆëŠ” ì´ì ì´ ìˆìŠµë‹ˆë‹¤.

