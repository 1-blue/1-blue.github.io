---
layout: post
title: ì›¹íŒ© ( Webpack + TypeScript + React )
author: admin
date: 2023-02-22 05:10:00 +900
lastmod: 2023-02-22 21:45:00 +900
sitemap:
  changefreq: monthly
  priority: 0.5
categories: [FrontEnd, Webpack]
tags: [Webpack, babel, loader, plugin, entry, output]
---

> í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” `webpack` + `TypeScript` + `React`ë¥¼ ì„¸íŒ…í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ í¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤.<br />ëŒ€ë¶€ë¶„ì˜ ë‚´ìš©ì€ [ryuhojinë‹˜ì˜ í¬ìŠ¤íŠ¸](https://ryuhojin.tistory.com/19){:target="_blank"}ë¥¼ ì°¸ê³ í–ˆìœ¼ë©° ì´í•´í–ˆê³  í•„ìš”í•œ ë¶€ë¶„ë§Œ ì¶”ê°€í–ˆê³  ëª¨ë¥´ëŠ” ë¶€ë¶„ì€ ì œì™¸í–ˆìŠµë‹ˆë‹¤.<br />
{:.prompt-info}

> ê²°ê³¼ë¬¼ì€ [GitHub - boilerplate](https://github.com/1-blue/boilerplate){:target="_blank"}ì— ì˜¬ë ¸ìŠµë‹ˆë‹¤.<br />
{:.prompt-tip}

# ğŸ“² Webpack ì´ë€
`webpack`ì€ ëª¨ë˜ `JavaScript`ë¥¼ ìœ„í•œ ì •ì  ëª¨ë“ˆ ë²ˆë“¤ëŸ¬ì…ë‹ˆë‹¤.<br />
ìì²´ì ìœ¼ë¡œëŠ” `JavaScript`ì™€ `JSON`ë§Œ í•´ì„ì´ ê°€ëŠ¥í•˜ê³  ë‹¤ë¥¸ ê²ƒì„ í•´ì„í•˜ê¸° ìœ„í•´ì„œëŠ” ê·¸ì— ë§ëŠ” `loader`ê°€ í•„ìš”í•©ë‹ˆë‹¤.<br />

## 0ï¸âƒ£ ë²ˆë“¤ë§/ë²ˆë“¤ëŸ¬
ë²ˆë“¤ëŸ¬ë€ ì—¬ëŸ¬ íŒŒì¼ë“¤ì„ ë²ˆë“¤ë§ í•´ì£¼ëŠ” ë„êµ¬ì…ë‹ˆë‹¤.<br />
ë²ˆë“¤ë§ë€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì„±í•˜ëŠ” ì—¬ëŸ¬ ê°œì˜ ìì›ë“¤ì„ í•˜ë‚˜ë¡œ ë³‘í•© ë° ì••ì¶•í•´ì£¼ëŠ” ë™ì‘ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.<br />
( ë¸Œë¼ìš°ì €ëŠ” `HTML`, `CSS`, `JavaScript` ë°–ì— í•´ì„í•˜ì§€ ëª»í•©ë‹ˆë‹¤. ( ì´ë¯¸ì§€, í°íŠ¸ ë“±ì˜ ì—ì…‹ì€ ì œì™¸ ) )<br />

+ `scss`, `sass`, `css` => `css`
+ `a.jsx`, `b.js` => `js`
+ `a.png`, `b.png` => `z.png`

í•˜ì§€ë§Œ ë¬´ì¡°ê±´ì ìœ¼ë¡œ í•˜ë‚˜ë¡œ í•©ì¹˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.<br />
ìƒí™©ê³¼ ì¡°ê±´ì— ë”°ë¼ì„œ íŒŒì¼ë¡œ ë‚˜ëˆ„ê³  í•„ìš”í•œ ë¶€ë¶„ë§Œ ë‚˜ì¤‘ì— ë¶ˆëŸ¬ì˜¤ëŠ” ì½”ë“œ ìŠ¤í”Œë¦¿íŒ…ê°™ì€ ê¸°ëŠ¥ë„ ìˆìŠµë‹ˆë‹¤.<br />

## 1ï¸âƒ£ ë²ˆë“¤ëŸ¬ ì‚¬ìš© ì´ìœ 
1. ì¤‘ë³µëœ ì´ë¦„ìœ¼ë¡œ ì¸í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•¨
2. íŒŒì¼ ì „ì†¡ì˜ íš¨ìœ¨ì„±ì„ ìœ„í•¨

ì—¬ëŸ¬ íŒŒì¼ì„ í•©ì¹  ë•Œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì¤‘ë³µëœ ì´ë¦„ ë¬¸ì œëŠ” ëª¨ë“ˆí™”ë¡œ í•´ê²°í•©ë‹ˆë‹¤.<br />
ë˜í•œ `HTTP`, `HTTPS`ì—ì„œëŠ” í¬ê¸°ê°€ 100ì¸ íŒŒì¼ 1ê°œë¥¼ ì „ì†¡í•˜ëŠ” ê²ƒì´ í¬ê¸°ê°€ 10ì¸ íŒŒì¼ 10ê°œë¥¼ ì „ì†¡í•˜ëŠ” ê²ƒë³´ë‹¤ ë¹ ë¥´ê¸° ë•Œë¬¸ì— íŒŒì¼ì„ í•˜ë‚˜ë¡œ í•©ì¹˜ë©´ ë„¤íŠ¸ì›Œí¬ ë¹„ìš©ì—ì„œ ë” ì´ì ì´ ìˆìŠµë‹ˆë‹¤.<br />

## 2ï¸âƒ£ ë²ˆë“¤ëŸ¬ ê¸°ëŠ¥
1. ëª¨ë“  ì¢…ë¥˜ì˜ íŒŒì¼ì„ ëª¨ë“ˆ ë‹¨ìœ„ë¡œ ë‚˜ëˆ ì„œ ìµœì†Œí•œì˜ ë¬¶ìŒìœ¼ë¡œ ë§Œë“¦
2. ë‚œë…í™” ë° ì••ì¶•
3. ë¬¸ë²• ë³€í™˜ ( íŠ¸ëœìŠ¤íŒŒì¼ )

ì§„ì…ì ì„ ê¸°ì¤€ìœ¼ë¡œ ì—°ê´€ëœ ëª¨ë“  íŒŒì¼ë“¤ì„ ëŒ€ë¶€ë¶„ í•˜ë‚˜ë¡œ í•©ì³ì„œ ë‚œë…í™” ë° ì••ì¶• ë° ë¬¸ë²• ë³€í™˜ì„ í•´ì¤ë‹ˆë‹¤.<br />
ë”°ë¼ì„œ ì™¸ë¶€ì—ì„œ íŒŒì¼ì„ ì½ê¸°ê°€ í˜ë“¤ê³ , íŒŒì¼ì´ ë” ê°€ë²¼ì›Œì§€ê³ , êµ¬ë²„ì „ ë¸Œë¼ìš°ì € ë™ì‘ ë¬¸ì œë‚˜ í¬ë¡œìŠ¤ ë¸Œë¼ìš°ì§• ë¬¸ì œë„ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br />

## 3ï¸âƒ£ Webpackì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ 
1. ë§ì€ í”ŒëŸ¬ê·¸ì¸ê³¼ ë¡œë”
2. ì•ˆì •ì ì´ê³  ë§ì€ ë ˆí¼ëŸ°ìŠ¤ ì¡´ì¬
3. `Hot Module Replacement` ( `Dev Server` )

`Dev Server`ëŠ” ë©”ëª¨ë¦¬ì—ë§Œ ì¡´ì¬í•˜ëŠ” ë²ˆë“¤ë§ëœ ë°ì´í„°ì…ë‹ˆë‹¤.<br />
( ì¦‰, íŒŒì¼ì„ ì§ì ‘ ë§Œë“¤ì§€ ì•ŠìŒ ( ì»´í“¨í„° ìì›ì„ ëœ ì‚¬ìš© ) )<br />

## 4ï¸âƒ£ Webpackì˜ í•µì‹¬ ì»¨ì…‰ ë° ê¸°ë³¸ ì„¤ì • ë°©ë²•
`Webpack`ì˜ ì„¤ì • ê°’ë“¤ì€ ì „ë¶€ ì´í•´í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ì—†ì„ ì •ë„ë¡œ ë„ˆë¬´ ë§ê¸° ë•Œë¬¸ì— ëª¨ë‘ ì´í•´í•˜ê¸° ë³´ë‹¤ëŠ” ì¼ë‹¨ [Webpack - ê³µì‹ ë¬¸ì„œ](https://webpack.kr/concepts/){:target="_blank"}ë¥¼ ë¨¼ì € ê°€ë³ê²Œ ì½ì–´ë³´ê³  íë¦„ì„ ì‚´í´ë³¸ ë’¤ì— ì´í›„ì— í•„ìš”í•œ ê¸°ëŠ¥ì´ ìˆì„ ë•Œë§ˆë‹¤ ì°¾ì•„ê°€ë©´ì„œ ì ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ì•„ë³´ì…ë‹ˆë‹¤.<br />

ì•„ë˜ì— ì‘ì„±í•œ ê²ƒì€ ê¸°ë³¸ì ì¸ ì„¤ì • ë°©ë²•ì…ë‹ˆë‹¤.<br />
í•„ìš” ì—†ëŠ” ê²ƒì´ ìˆë‹¤ë©´ ì œê±°í•˜ê³  í•„ìš”í•œ ê²ƒì´ ìˆë‹¤ë©´ ì„¤ì¹˜í•˜ê³  ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤.<br />

+ í•µì‹¬ ì»¨ì…‰ ë„¤ ê°€ì§€
  1. `entry`: ë²ˆë“¤ë§ì˜ ì§„ì…ì  ( ì§„ì…ì ì„ ê¸°ì¤€ìœ¼ë¡œ ì—°ê´€ëœ íŒŒì¼ë“¤ì„ ë²ˆë“¤ë§ )
  2. `output`: ë²ˆë“¤ë§ëœ ê²°ê³¼ë¬¼ì— ëŒ€í•œ ì„¤ì •
  3. `module`: ë²ˆë“¤ë§í•˜ëŠ”ë° ì‚¬ìš©í•˜ëŠ” `loader` ì„¤ì • ( `js`, `JSON`ì™¸ ë‹¤ë¥¸ ê²ƒì„ ë²ˆë“¤ë§í•  ë•Œ ì‚¬ìš© )
  4. `plugin`: ë²ˆë“¤ë§í•œ ê²°ê³¼ë¬¼ì— íŠ¹ì • ì²˜ë¦¬ë¥¼ í•  ë•Œ ì‚¬ìš©í•  `plugin` ì„¤ì •

```ts
import path from "path";
import webpack from "webpack";

// plugin
import HtmlWebpackPlugin from "html-webpack-plugin";

const configuration: webpack.Configuration = {
  mode: "",

  // ëª¨ë“ˆ í•´ì„ ë°©ë²• ì„¤ì •
  resolve: {
    // ìƒëµí•  í™•ì¥ì
    extensions: [".ts", ".tsx", ".js", ".jsx"],

    // ì ˆëŒ€ ê²½ë¡œ
    alias: {
      "@src": path.resolve(__dirname, "../src/"),
    },
  },

  // ì§„ì…ì 
  entry: "./src/index",

  // ê²°ê³¼ë¬¼
  output: {
    path: path.resolve(__dirname, "../dist"),
    filename: "[name].bundle.js",
  },

  // ë¡œë”
  module: {
    // ë¡œë”ë“¤ ëª…ì‹œí•  ë°°ì—´
    rules: [
      // babel-loader
      {
        test: /\.(ts|tsx|js|jsx)$/,
        use: ["babel-loader"],
        exclude: /node_modules/,
      },
      // ìŠ¤íƒ€ì¼ ê´€ë ¨ ë¡œë” ( ìš°ì¸¡ë¶€í„° ì‹¤í–‰ )
      {
        test: /\.css$/,
        use: ["style-loader", "css-loader"],
        exclude: /node_modules/,
      },
    ],
  },

  // í”ŒëŸ¬ê·¸ì¸
  plugins: [
    new HtmlWebpackPlugin({
      template: path.join(__dirname, "..", "public", "index.html"),
    }),
  ],
};

export default configuration;
```

# ğŸ“„ ì„¤ì¹˜
## 0ï¸âƒ£ React
```bash
npm i react react-dom react-router-dom
```

+ `react`: `React`ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì„¤ì¹˜
+ `react-dom`: `React`ì˜ ë°ì´í„°ë¥¼ ì‹¤ì œ `DOM`ìœ¼ë¡œ ë³€ê²½í•˜ê¸° ìœ„í•´ ì‚¬ìš©
+ `react-router-dom`: `SPA`ì˜ ë¼ìš°íŒ… ì²˜ë¦¬ë¥¼ ìœ„í•´ ì‚¬ìš©

## 1ï¸âƒ£ Babel
> `babel`ì— ëŒ€í•´ ê¶ê¸ˆí•˜ì‹œë‹¤ë©´ [í¬ìŠ¤íŠ¸](/posts/babel/){:target="_blank"}ë¥¼ ì½ì–´ë³´ì‹œëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.<br />
{:.prompt-info}

```bash
npm i -D @babel/preset-env @babel/preset-typescript @babel/preset-react core-js
```

> `preset`ì´ë€ ìì£¼ ì‚¬ìš©í•˜ëŠ” `babel` í”ŒëŸ¬ê·¸ì¸ë“¤ì„ í•©ì³ì„œ ì œê³µí•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.<br />
{:.prompt-tip}

+ [`@babel/preset-env`](https://babeljs.io/docs/babel-preset-env){:target="_blank"}: êµ¬ë¬¸ ë³€í™˜ ë° í´ë¦¬í•„ ê°™ì€ ë‹¤ì–‘í•œ ì²˜ë¦¬ë¥¼ í•´ì£¼ëŠ” `preset`
+ [`@babel/preset-react`](https://babeljs.io/docs/babel-preset-react){:target="_blank"}: `jsx` êµ¬ë¬¸ì„ `js`ë¡œ ë°”ê¿”ì£¼ëŠ” ë“±ì˜ ì²˜ë¦¬ë¥¼ í•´ì£¼ëŠ” `preset`
+ [`@babel/preset-typescript`](https://babeljs.io/docs/babel-preset-typescript){:target="_blank"}: `typescript`ë¥¼ `javascript`ë¡œ ë°”ê¿”ì£¼ëŠ” ë“±ì˜ ì²˜ë¦¬ë¥¼ í•´ì£¼ëŠ” `preset`
+ [`@babel/preset-typescript`](https://babeljs.io/docs/babel-preset-typescript){:target="_blank"}: `typescript`ë¥¼ `javascript`ë¡œ ë°”ê¿”ì£¼ëŠ” ë“±ì˜ ì²˜ë¦¬ë¥¼ í•´ì£¼ëŠ” `preset`
+ [`corejs`](https://github.com/zloirock/core-js){:target="_blank"}: `polyfill`ì„ ìœ„í•´ ì„¤ì¹˜

## 2ï¸âƒ£ Webpack
```bash
npm i -D webpack webpack-cli webpack-dev-server webpack-merge
```

+ [`webpack`](https://webpack.kr/guides/installation/){:target="_blank"}: `webpack`ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì„¤ì¹˜
+ [`webpack-cli`](https://webpack.kr/api/cli/#commands){:target="_blank"}: `CLI`ì—ì„œ `webpack` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì„¤ì¹˜
+ [`webpack-dev-server`](https://webpack.kr/configuration/dev-server/){:target="_blank"}: ê°œë°œ ì„œë²„ë¡œ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ì„¤ì¹˜
+ [`webpack-merge`](https://webpack.kr/guides/production/){:target="_blank"}: ëª¨ë“œì— ë”°ë¼ ë‹¤ë¥¸ ì„¤ì •ì„ ì ìš©í•œ íŒŒì¼ì„ í•©ì¹˜ëŠ”ë° ì‚¬ìš©

## 3ï¸âƒ£ Loader
```bash
npm i -D css-loader style-loader babel-loader
```

+ [`css-loader`](https://www.npmjs.com/package/css-loader){:target="_blank"}: `css`íŒŒì¼ì„ ì½ëŠ” `loader`
+ [`style-loader`](https://www.npmjs.com/package/style-loader){:target="_blank"}: `css`ë¥¼ `inline`ìœ¼ë¡œ `<style></style>`ì— ë„£ì–´ì£¼ëŠ” `loader`
+ [`babel-loader`](https://www.npmjs.com/package/babel-loader){:target="_blank"}: `webpack`ì—ì„œ `babel`ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” `loader`

## 4ï¸âƒ£ Plugin
```bash
npm i -D html-webpack-plugin css-minimizer-webpack-plugin mini-css-extract-plugin webpack-bundle-analyzer

# "React"ë¥¼ ì‚¬ìš©í•˜ê³  "HMR"ì´ í•„ìš”í•˜ë‹¤ë©´ ì„¤ì¹˜
npm i @pmmmwh/react-refresh-webpack-plugin
```

+ [`html-webpack-plugin`](https://webpack.kr/plugins/html-webpack-plugin/){:target="_blank"}: ë²ˆë“¤ë§ ê²°ê³¼ë¥¼ í¬í•¨í•œ `HTML`ì„ ì œê³µí•˜ëŠ” `plugin`
+ [`css-minimizer-webpack-plugin`](https://www.npmjs.com/package/css-minimizer-webpack-plugin){:target="_blank"}: `css` ì••ì¶• `plugin`
+ [`mini-css-extract-plugin`](https://www.npmjs.com/package/mini-css-extract-plugin){:target="_blank"}: `css` ëª¨ë“ˆí™” `plugin` ( `style-loader`ì™€ ê°™ì´ ì‚¬ìš© X )
+ [`webpack-bundle-analyzer`](https://www.npmjs.com/package/webpack-bundle-analyzer){:target="_blank"}: ë²ˆë“¤ ì‚¬ì´ì¦ˆë¥¼ `UI`ë¡œ ë³´ì—¬ì£¼ëŠ” í”ŒëŸ¬ê·¸ì¸
+ [`@pmmmwh/react-refresh-webpack-plugin`](https://www.npmjs.com/package/@pmmmwh/react-refresh-webpack-plugin){:target="_blank"}: `React`ì—ì„œ `HMR`ì„ ì ìš©í•˜ê¸° ìœ„í•œ í”ŒëŸ¬ê·¸ì¸ ( ì—†ìœ¼ë©´ ì½”ë“œ ë³€ê²½ ì‹œ ìƒˆë¡œê³ ì¹¨ë¨ )

## 5ï¸âƒ£ TypeScript
```bash
npm i -D typescript ts-node @types/react @types/react-dom @types/webpack @types/webpack-dev-server @types/node
```  

+ `typescript`: `TypeScript` ì‚¬ìš©ì„ ìœ„í•´ ì„¤ì¹˜
+ `ts-node`: `Node.js`ì—ì„œ `TypeScript` ì‹¤í–‰ì„ ìœ„í•´ ì„¤ì¹˜
+ `@types/react`: `React`ì˜ íƒ€ì… ì„ ì–¸
+ `@types/react-dom`: `ReactDOM`ì˜ íƒ€ì… ì„ ì–¸
+ `@types/webpack`: `Webpack`ì˜ íƒ€ì… ì„ ì–¸
+ `@types/webpack-dev-server`: `Webpack Dev Server`ì˜ íƒ€ì… ì„ ì–¸
+ `@types/node`: `Node`ì˜ íƒ€ì… ì„ ì–¸

# ğŸ§¹ ì„¸íŒ…
## 0ï¸âƒ£ TypeScript ì„¸íŒ… ( tsconfig.json )
`(1)`ì€ ì ˆëŒ€ ê²½ë¡œë¥¼ ìœ„í•œ ì„¤ì • ê°’ì…ë‹ˆë‹¤. ( `@src/components`, `@src/utils` ë“± )<br />
`(2)`ì€ `webpack` ì„¤ì • íŒŒì¼ì—ì„œ `ES6` ëª¨ë“ˆ ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì„¤ì •ì…ë‹ˆë‹¤. ( ì¦‰, ì„¤ì • íŒŒì¼ì— `TypeScript`ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•¨ )<br />
( [webpack - TypeScript](https://webpack.kr/configuration/configuration-languages/#typescript){:target="_blank"} ì°¸ê³  )

```json
{
  "compilerOptions": {
    "outDir": "./dist",
    "target": "ES5",
    "module": "ESNext",
    "jsx": "react-jsx",
    "noImplicitAny": true,
    "allowSyntheticDefaultImports": true,
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "esModuleInterop": true,
    "strict": true,
    "forceConsistentCasingInFileNames": true,
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "isolatedModules": true,

    // (1) ì ˆëŒ€ ê²½ë¡œ
    "baseUrl": ".",
    "paths": {
      "@src/*": ["src/*"]
    }
  },
  "include": ["src"],
  "exclude": ["node_modules", "dist"],

  // (2) "webpack"ì„¤ì • íŒŒì¼ë“¤ì„ "typescript"ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©
  "ts-node": {
    "compilerOptions": {
      "module": "CommonJS"
    }
  }
}
```

## 1ï¸âƒ£ Babel ì„¸íŒ… ( babel.config.js )
ì‚¬ìš©í•  `babel`ì˜ `preset`ì„ ë“±ë¡í•˜ëŠ” ì„¤ì • íŒŒì¼ì…ë‹ˆë‹¤.<br />

1. `modules: false`: `ES6` ëª¨ë“ˆ ì‹œìŠ¤í…œ ì‚¬ìš©ì„ ìœ„í•´ ì ìš© ( [`Tree Shaking`](/posts/Tree-Shaking/){:target="_blank"} )
2. `useBuiltIns: "usage"`: `corejs`ì—ì„œ ì‚¬ìš©í•˜ëŠ” `polyfill`ë§Œ `import`ë¡œ ì‚½ì…
3. `corejs: 3`: ì‚¬ìš©í•  `corejs` ë²„ì „ ëª…ì‹œ ( ê¸°ë³¸ ê°’ 2 )

```js
const presets = [
  "@babel/preset-react",
  [
    "@babel/preset-env",
    {
      modules: false, // "Tree Shaking"ì„ ìœ„í•¨ ( ES6 ëª¨ë“ˆ ì‹œìŠ¤í…œ ì‚¬ìš© )
      useBuiltIns: "usage", // "corejs"ì—ì„œ ì‚¬ìš©í•˜ëŠ” "polyfill"ë§Œ "import"ë§Œ ì‚½ì…
      corejs: 3, // ì‚¬ìš©í•  `corejs` ë²„ì „ ëª…ì‹œ
    },
  ],
  "@babel/preset-typescript",
];
const plugins = [];

module.exports = { presets, plugins };
```

## 2ï¸âƒ£ Webpack ì„¸íŒ… ( ê³µí†µ ) ( webpack.common.ts )
> ê³µí†µ ì„¤ì • íŒŒì¼ì— ì‘ì„±í•œ ë‚´ìš©ì€ ê°œë°œ / ë°°í¬ ì„¤ì • íŒŒì¼ì— ëª¨ë‘ ì ìš©ë©ë‹ˆë‹¤.( `webpack-merge` )<br />
{:.prompt-tip}

`webpack`ì€ ì´ 3ê°œì˜ íŒŒì¼ë¡œ ë‚˜ëˆ ì„œ ì„¸íŒ…í•©ë‹ˆë‹¤.<br />
`config` í´ë” ë‚´ë¶€ì— ì„¸ ê°œì˜ íŒŒì¼ì„ ì‘ì„±í•©ë‹ˆë‹¤.<br />
( ì–´ì°¨í”¼ `package.json`ì— ì‚¬ìš©í•  ì„¸íŒ… íŒŒì¼ì„ ëª…ì‹œí•  ê²ƒì´ê¸° ë•Œë¬¸ì— í´ë”ëª…ì€ ìƒê´€ ì—†ìŠµë‹ˆë‹¤. )<br />

êµ³ì´ íŒŒì¼ì„ ë‚˜ëˆ„ê¸° ì‹«ë‹¤ë©´ `webpack-merge`ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  `webpack.config.ts` í•˜ë‚˜ë¡œ í†µì¼í•´ë„ ë©ë‹ˆë‹¤.<br />

1. ê³µí†µ ì„¤ì • íŒŒì¼ ( `config/webpack.common.ts` )
2. ê°œë°œìš© ì„¤ì • íŒŒì¼ ( `config/webpack.dev.ts` )
3. ë°°í¬ìš© ì„¤ì • íŒŒì¼ ( `config/webpack.prod.ts` )

```ts
// webpack.common.ts

import path from "path";
import webpack from "webpack";

// plugin
import HtmlWebpackPlugin from "html-webpack-plugin";

const configuration: webpack.Configuration = {
  // ëª¨ë“ˆ í•´ì„ ë°©ë²• ì„¤ì •
  resolve: {
    // ìƒëµí•  í™•ì¥ì
    extensions: [".ts", ".tsx", ".js", ".jsx"],

    // ì ˆëŒ€ ê²½ë¡œ
    alias: {
      "@src": path.resolve(__dirname, "../src/"),
    },
  },

  // ì§„ì…ì 
  entry: "./src/index",

  // ë¡œë”
  module: {
    rules: [
      // babel-loader ( react, ts, polyfill, êµ¬ë¬¸ ë³€í™˜ ë“±ì„ ì²˜ë¦¬ ( babel.config.js ) )
      {
        test: /\.(ts|tsx|js|jsx)$/,
        use: ["babel-loader"],
        exclude: /node_modules/,
      },
    ],
  },

  // í”ŒëŸ¬ê·¸ì¸
  plugins: [
    new HtmlWebpackPlugin({
      template: path.join(__dirname, "..", "public", "index.html"),
    }),
    // import React from "react" ìƒëµì„ ìœ„í•œ í”ŒëŸ¬ê·¸ì¸ ì„¤ì •
    new webpack.ProvidePlugin({ React: "react" }),
  ],
};

export default configuration;
```

## 3ï¸âƒ£ Webpack ì„¸íŒ… ( ê°œë°œìš© ) ( webpack.dev.ts )
```ts
// webpack.dev.ts

import path from "path";
import webpack from "webpack";
import "webpack-dev-server";
import { merge } from "webpack-merge";
import common from "./webpack.common";

// plugin
import RefreshWebpackPlugin from "@pmmmwh/react-refresh-webpack-plugin";

const configuration: webpack.Configuration = {
  mode: "development",
  devtool: "inline-source-map",
  output: {
    path: path.resolve(__dirname, "../dist"),
    filename: "[name].bundle.js",
  },
  module: {
    rules: [
      {
        test: /\.css$/,
        use: ["style-loader", "css-loader"],
        exclude: /node_modules/,
      },
    ],
  },
  plugins: [new RefreshWebpackPlugin()],
  devServer: {
    static: path.join(__dirname, "public"),
    port: 3000,
    open: true,
    compress: true, // ëª¨ë“  í•­ëª©ì„ `gzip`ìœ¼ë¡œ ì••ì¶•
    historyApiFallback: true, // ì¡´ì¬í•˜ì§€ ì•ŠëŠ” "URL" ì ‘ê·¼ ì‹œ "index.html"ë¡œ ëŒ€ì²´
    hot: true // "Hot Mourle Replacement" ì‚¬ìš©
  },
  watchOptions: {
    ignored: /node_modules/, // ê°ì‹œí•˜ì§€ ì•Šì„ í•­ëª© ì„¤ì •
  },
};

export default merge(common, configuration);
```

+ `devServer`
  1. `static`: ì •ì  íŒŒì¼ì˜ ì œê³µ
  1. `static.publicPath`: ì •ì  íŒŒì¼ ì ‘ê·¼ `URL` ì„¤ì •
  1. `allowedHosts`: ê°œë°œ ì„œë²„ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í˜¸ìŠ¤íŠ¸ë“¤ ì‘ì„± ( `all`ë„ ê°€ëŠ¥ )
  1. `compress`: ëª¨ë“  í•­ëª©ì„ `gzip`ìœ¼ë¡œ ì••ì¶•í•¨
  1. `headers`: ëª¨ë“  ì‘ë‹µ í—¤ë”ì— ì¶”ê°€ ( ê°ì²´ or ë°°ì—´ )
  1. `historyApiFallback`: ì¡´ì¬í•˜ì§€ ì•ŠëŠ” `URL`ì ‘ê·¼ ì‹œ `404` ëŒ€ì‹  `index.html` ì œê³µ
  1. `onAfterSetupMiddleware`, `onBeforeSetupMiddleware`: ì»¤ìŠ¤í…€ ë¯¸ë“¤ì›¨ì–´
  1. `open`: ì„œë²„ ì‹¤í–‰ í›„ ë¸Œë¼ìš°ì € ì—´ê¸°
  1. `port`: í¬íŠ¸ ê²°ì • ( `auto` ê°€ëŠ¥ )
  1. `proxy`: í”„ë¡ì‹œ ì„œë²„ ì„¤ì •

## 4ï¸âƒ£ Webpack ì„¸íŒ… ( ë°°í¬ìš© ) ( webpack.prod.ts )
```ts
// webpack.prod.ts

import path from "path";
import webpack from "webpack";
import { merge } from "webpack-merge";
import common from "./webpack.common";

// plugin
import MiniCssExtractPlugin from "mini-css-extract-plugin";
import CssMinimizerPlugin from "css-minimizer-webpack-plugin";

const configuration: webpack.Configuration = {
  mode: "production",
  devtool: "cheap-module-source-map",
  output: {
    path: path.resolve(__dirname, "../dist"),
    filename: "[name].[contenthash].js",
    clean: true,
  },
  module: {
    rules: [
      {
        test: /\.css$/i,
        use: [MiniCssExtractPlugin.loader, "css-loader"],
      },
    ],
  },
  plugins: [new MiniCssExtractPlugin()],
  optimization: {
    usedExports: true, // ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” "export" ì œê±°
    minimize: true, // "minimizer"ì— ì§€ì •í•œ í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•˜ì—¬ ë²ˆë“¤ ìµœì†Œí™”
    minimizer: [new CssMinimizerPlugin()], // ìµœì í™”ì— ì‚¬ìš©í•  í”ŒëŸ¬ê·¸ì¸ ì ìš©
  },
};

export default merge(common, configuration);
```

# ğŸ“® ë ˆí¼ëŸ°ìŠ¤
1. [GitHub - boilerplate](https://github.com/1-blue/boilerplate){:target="_blank"}

1. [webpack](https://webpack.kr/){:target="_blank"}
1. [ryuhojin - `React` + `TypeScript` + `Webpack5` ì´ˆê¸° ì„¤ì •](https://ryuhojin.tistory.com/19){:target="_blank"}
1. [tech.osci.kr - `CRA`ì—†ì´ ë°°ìš°ëŠ” `Webpack`](https://tech.osci.kr/2022/10/24/create-react-app-%ec%97%86%ec%9d%b4-%eb%b0%b0%ec%9a%b0%eb%8a%94-webpack/){:target="_blank"}

1. [1-blue - `babel`](/posts/babel/){:target="_blank"}
1. [babel - `@babel/preset-env`](https://babeljs.io/docs/babel-preset-env){:target="_blank"}
1. [babel - `@babel/preset-react`](https://babeljs.io/docs/babel-preset-react){:target="_blank"}
1. [babel - `@babel/preset-typescript`](https://babeljs.io/docs/babel-preset-typescript){:target="_blank"}

1. [webpack - `webpack`](https://webpack.kr/guides/installation/){:target="_blank"}
1. [webpack - `webpack-cli`](https://webpack.kr/api/cli/#commands){:target="_blank"}
1. [webpack - `webpack-dev-server`](https://webpack.kr/configuration/dev-server/){:target="_blank"}
1. [webpack - `webpack-merge`](https://webpack.kr/guides/production/){:target="_blank"}

1. [npm - `css-loader`](https://www.npmjs.com/package/css-loader){:target="_blank"}
1. [npm - `style-loader`](https://www.npmjs.com/package/style-loader){:target="_blank"}
1. [npm - `babel-loader`](https://www.npmjs.com/package/babel-loader){:target="_blank"}

1. [webpack - `html-webpack-plugin`](https://webpack.kr/plugins/html-webpack-plugin/){:target="_blank"}
1. [npm - `css-minimizer-webpack-plugin`](https://www.npmjs.com/package/css-minimizer-webpack-plugin){:target="_blank"}
1. [npm - `mini-css-extract-plugin`](https://www.npmjs.com/package/mini-css-extract-plugin){:target="_blank"}
1. [npm - `webpack-bundle-analyzer`](https://www.npmjs.com/package/webpack-bundle-analyzer){:target="_blank"}

1. [webpack - TypeScript](https://webpack.kr/configuration/configuration-languages/#typescript){:target="_blank"}
1. [1-blue - `Tree Shaking`](/posts/Tree-Shaking/){:target="_blank"}
